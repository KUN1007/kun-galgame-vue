{"version":3,"sources":["index.js"],"names":["packageJson","DefaultStore","constructor","state","callbacks","getState","setState","patch","prevState","nextState","subscribe","listener","push","splice","indexOf","args","forEach","VERSION","version","defaultStore"],"mappings":";;;;;;;;MAAOA,W;;;AACP;AACA;AACA;;;;AACA,MAAMC,YAAN,CAAmB;AAGjBC,EAAAA,WAAW,GAAI;AAAA;AAAA;AAAA;AACb,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,EAAjB,CAFa,CAEO;AACrB;;AAEDC,EAAAA,QAAQ,GAAI;AACV,WAAO,KAAKF,KAAZ;AACD;;AAEDG,EAAAA,QAAQ,CAAEC,KAAF,EAAS;AACf,UAAMC,SAAS,GAAG,EAAE,GAAG,KAAKL;AAAV,KAAlB;AACA,UAAMM,SAAS,GAAG,EAAE,GAAG,KAAKN,KAAV;AAAiB,SAAGI;AAApB,KAAlB;AAEA,SAAKJ,KAAL,GAAaM,SAAb;;AACA,0DAAcD,SAAd,EAAyBC,SAAzB,EAAoCF,KAApC;AACD;;AAEDG,EAAAA,SAAS,CAAEC,QAAF,EAAY;AACnB,SAAKP,SAAL,CAAeQ,IAAf,CAAoBD,QAApB;AACA,WAAO,MAAM;AACX;AACA,WAAKP,SAAL,CAAeS,MAAf,CACE,KAAKT,SAAL,CAAeU,OAAf,CAAuBH,QAAvB,CADF,EAEE,CAFF;AAID,KAND;AAOD;;AA7BgB,C,CAsCnB;;;qBAPqB;AAAA,oCAANI,IAAM;AAANA,IAAAA,IAAM;AAAA;;AACjB,OAAKX,SAAL,CAAeY,OAAf,CAAwBL,QAAD,IAAc;AACnCA,IAAAA,QAAQ,CAAC,GAAGI,IAAJ,CAAR;AACD,GAFD;AAGD;;AAnCGd,Y,CACGgB,O,GAAUjB,WAAW,CAACkB,O;;AAsChB,SAASC,YAAT,GAAyB;AACtC,SAAO,IAAIlB,YAAJ,EAAP;AACD;;iBAFuBkB,Y","sourcesContent":["import packageJson from '../package.json'\n/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n  static VERSION = packageJson.version\n\n  constructor () {\n    this.state = {}\n    this.callbacks = [] // TODO: use a Set instead, make it a private prop\n  }\n\n  getState () {\n    return this.state\n  }\n\n  setState (patch) {\n    const prevState = { ...this.state }\n    const nextState = { ...this.state, ...patch }\n\n    this.state = nextState\n    this.#publish(prevState, nextState, patch)\n  }\n\n  subscribe (listener) {\n    this.callbacks.push(listener)\n    return () => {\n      // Remove the listener.\n      this.callbacks.splice(\n        this.callbacks.indexOf(listener),\n        1,\n      )\n    }\n  }\n\n  #publish (...args) {\n    this.callbacks.forEach((listener) => {\n      listener(...args)\n    })\n  }\n}\n\n// TODO: export the class instead in the next major.\nexport default function defaultStore () {\n  return new DefaultStore()\n}\n"]}